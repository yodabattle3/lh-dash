<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Command Configuration Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --discord-blurple: #5865F2;
            --discord-green: #57F287;
            --discord-yellow: #FEE75C;
            --discord-red: #ED4245;
            --discord-dark: #2C2F33;
            --discord-darker: #23272A;
        }
        
        body {
            background-color: var(--discord-darker);
            color: white;
            font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }
        
        .navbar {
            background-color: var(--discord-dark);
        }
        
        .card {
            background-color: var(--discord-dark);
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .card-header {
            background-color: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-weight: 600;
        }
        
        .btn-primary {
            background-color: var(--discord-blurple);
            border: none;
        }
        
        .btn-primary:hover {
            background-color: #4752C4;
        }
        
        .btn-danger {
            background-color: var(--discord-red);
            border: none;
        }
        
        .btn-success {
            background-color: var(--discord-green);
            border: none;
        }
        
        .form-control, .form-select {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .form-control:focus, .form-select:focus {
            background-color: rgba(0, 0, 0, 0.3);
            color: white;
            border-color: var(--discord-blurple);
            box-shadow: 0 0 0 0.25rem rgba(88, 101, 242, 0.25);
        }
        
        .table {
            color: white;
        }
        
        .table th {
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .table td {
            border-color: rgba(255, 255, 255, 0.05);
        }
        
        .badge-moderation {
            background-color: #ED4245;
        }
        
        .badge-giveaway {
            background-color: #FEE75C;
            color: black;
        }
        
        .badge-utility {
            background-color: #5865F2;
        }
        
        .command-icon {
            font-size: 1.2rem;
            margin-right: 8px;
        }
        
        .sidebar {
            background-color: var(--discord-dark);
            height: 100vh;
            position: fixed;
            padding-top: 20px;
        }
        
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.7);
            border-radius: 4px;
            margin-bottom: 5px;
            padding: 8px 15px;
        }
        
        .sidebar .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .sidebar .nav-link.active {
            background-color: var(--discord-blurple);
            color: white;
        }
        
        .sidebar .nav-link i {
            margin-right: 10px;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
        }
        
        .role-permission-item {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .command-category {
            margin-bottom: 30px;
        }
        
        .command-item {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .guild-selector {
            margin-bottom: 20px;
        }
        
        .stat-card {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .stat-card i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .stat-card .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-card .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="sidebar col-md-3 col-lg-2 d-md-block">
        <div class="text-center mb-4">
            <h4>Bot Dashboard</h4>
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#dashboard" data-bs-toggle="tab">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#commands" data-bs-toggle="tab">
                    <i class="bi bi-command"></i> Command Config
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#moderation" data-bs-toggle="tab">
                    <i class="bi bi-shield-check"></i> Moderation
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#giveaways" data-bs-toggle="tab">
                    <i class="bi bi-gift"></i> Giveaways
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#settings" data-bs-toggle="tab">
                    <i class="bi bi-gear"></i> Settings
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <div class="container-fluid">
            <div class="tab-content">
                <!-- Dashboard Tab -->
                <div class="tab-pane fade show active" id="dashboard">
                    <h2><i class="bi bi-speedometer2"></i> Bot Dashboard</h2>
                    <hr>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="stat-card bg-primary">
                                <i class="bi bi-people-fill"></i>
                                <div class="stat-value" id="guild-count">0</div>
                                <div class="stat-label">Servers</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card bg-success">
                                <i class="bi bi-person-check-fill"></i>
                                <div class="stat-value" id="user-count">0</div>
                                <div class="stat-label">Users</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card bg-warning text-dark">
                                <i class="bi bi-command"></i>
                                <div class="stat-value" id="command-count">0</div>
                                <div class="stat-label">Commands</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-header">
                            <i class="bi bi-activity"></i> Bot Status
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>System Information</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>Uptime:</strong> <span id="uptime">Loading...</span>
                                        </li>
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>Memory Usage:</strong> <span id="memory-usage">Loading...</span>
                                        </li>
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>CPU Load:</strong> <span id="cpu-load">Loading...</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h5>Bot Information</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>Ping:</strong> <span id="bot-ping">Loading...</span>
                                        </li>
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>Commands Executed:</strong> <span id="commands-executed">0</span>
                                        </li>
                                        <li class="list-group-item bg-transparent text-white">
                                            <strong>Last Restart:</strong> <span id="last-restart">Loading...</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-header">
                            <i class="bi bi-list-check"></i> Recent Activity
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Time</th>
                                            <th>Action</th>
                                            <th>Server</th>
                                            <th>Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="activity-log">
                                        <!-- Activity log will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Command Configuration Tab -->
                <div class="tab-pane fade" id="commands">
                    <h2><i class="bi bi-command"></i> Command Configuration</h2>
                    <hr>
                    
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> Configure which roles can use specific commands in your server.
                    </div>
                    
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-discord"></i> Select Server
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="guild-select" class="form-label">Server</label>
                                    <select class="form-select" id="guild-select">
                                        <option selected disabled>Select a server...</option>
                                        <!-- Guilds will be populated here -->
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Your Permissions</label>
                                    <div id="user-permissions" class="text-muted">
                                        Select a server to view your permissions
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="command-config-section" style="display: none;">
                        <div class="card mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-shield-check"></i> Moderation Commands</span>
                                <button class="btn btn-sm btn-primary" onclick="saveCommandPermissions('moderation')">
                                    <i class="bi bi-save"></i> Save Moderation
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="command-category">
                                    <div class="command-item">
                                        <h5><i class="bi bi-ban command-icon"></i> /ban</h5>
                                        <p>Ban a member from the server</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="ban-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="command-item">
                                        <h5><i class="bi bi-person-x command-icon"></i> /kick</h5>
                                        <p>Kick a member from the server</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="kick-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="command-item">
                                        <h5><i class="bi bi-exclamation-triangle command-icon"></i> /warn</h5>
                                        <p>Warn a member</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="warn-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="command-item">
                                        <h5><i class="bi bi-list-ul command-icon"></i> /warnings</h5>
                                        <p>View warnings for a member</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="warnings-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-gift"></i> Giveaway Commands</span>
                                <button class="btn btn-sm btn-primary" onclick="saveCommandPermissions('giveaway')">
                                    <i class="bi bi-save"></i> Save Giveaway
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="command-category">
                                    <div class="command-item">
                                        <h5><i class="bi bi-gift command-icon"></i> /giveaway</h5>
                                        <p>Start a new giveaway</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="giveaway-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="command-item">
                                        <h5><i class="bi bi-arrow-repeat command-icon"></i> /reroll</h5>
                                        <p>Reroll a giveaway</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="reroll-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mb-4">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span><i class="bi bi-tools"></i> Utility Commands</span>
                                <button class="btn btn-sm btn-primary" onclick="saveCommandPermissions('utility')">
                                    <i class="bi bi-save"></i> Save Utility
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="command-category">
                                    <div class="command-item">
                                        <h5><i class="bi bi-lightning-charge command-icon"></i> /ping</h5>
                                        <p>Check bot latency</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="ping-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="command-item">
                                        <h5><i class="bi bi-question-circle command-icon"></i> /help</h5>
                                        <p>Show help information</p>
                                        <div class="mb-3">
                                            <label class="form-label">Allowed Roles</label>
                                            <select class="form-select multiple-select" multiple id="help-roles">
                                                <!-- Roles will be populated here -->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Moderation Tab -->
                <div class="tab-pane fade" id="moderation">
                    <h2><i class="bi bi-shield-check"></i> Moderation</h2>
                    <hr>
                    
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-exclamation-triangle"></i> Warning System
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Warning Configuration</h5>
                                    <div class="mb-3">
                                        <label class="form-label">Max Warnings Before Action</label>
                                        <input type="number" class="form-control" id="max-warnings" min="1" value="3">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Action After Max Warnings</label>
                                        <select class="form-select" id="warning-action">
                                            <option value="kick">Kick</option>
                                            <option value="ban">Ban</option>
                                            <option value="mute">Mute</option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary" onclick="saveWarningConfig()">
                                        <i class="bi bi-save"></i> Save Warning Settings
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <h5>Warning Statistics</h5>
                                    <div class="alert alert-info">
                                        <i class="bi bi-info-circle"></i> Total warnings issued: <strong id="total-warnings">0</strong>
                                    </div>
                                    <div class="alert alert-warning">
                                        <i class="bi bi-exclamation-triangle"></i> Users with 3+ warnings: <strong id="repeat-offenders">0</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-list-ul"></i> Recent Moderation Actions</span>
                            <button class="btn btn-sm btn-secondary" onclick="refreshModLogs()">
                                <i class="bi bi-arrow-clockwise"></i> Refresh
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Action</th>
                                            <th>Moderator</th>
                                            <th>Reason</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="mod-logs">
                                        <!-- Mod logs will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Giveaways Tab -->
                <div class="tab-pane fade" id="giveaways">
                    <h2><i class="bi bi-gift"></i> Giveaways</h2>
                    <hr>
                    
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-gear"></i> Giveaway Settings
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Configuration</h5>
                                    <div class="mb-3">
                                        <label class="form-label">Default Winner Role</label>
                                        <select class="form-select" id="winner-role">
                                            <option value="">No role</option>
                                            <!-- Roles will be populated here -->
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Default Duration</label>
                                        <input type="text" class="form-control" id="default-duration" value="24h">
                                        <small class="text-muted">Examples: 1h, 30m, 7d</small>
                                    </div>
                                    <button class="btn btn-primary" onclick="saveGiveawayConfig()">
                                        <i class="bi bi-save"></i> Save Settings
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <h5>Statistics</h5>
                                    <div class="alert alert-info">
                                        <i class="bi bi-info-circle"></i> Total giveaways: <strong id="total-giveaways">0</strong>
                                    </div>
                                    <div class="alert alert-success">
                                        <i class="bi bi-gift"></i> Active giveaways: <strong id="active-giveaways">0</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-list-ul"></i> Active Giveaways</span>
                            <button class="btn btn-sm btn-secondary" onclick="refreshGiveaways()">
                                <i class="bi bi-arrow-clockwise"></i> Refresh
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Prize</th>
                                            <th>Channel</th>
                                            <th>Ends In</th>
                                            <th>Entries</th>
                                            <th>Winners</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="giveaway-list">
                                        <!-- Giveaways will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div class="tab-pane fade" id="settings">
                    <h2><i class="bi bi-gear"></i> Bot Settings</h2>
                    <hr>
                    
                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="bi bi-sliders"></i> General Settings
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Command Prefix</label>
                                <input type="text" class="form-control" id="command-prefix" value="$">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Default Embed Color</label>
                                <input type="color" class="form-control form-control-color" id="embed-color" value="#5865F2">
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="slash-commands-enabled" checked>
                                <label class="form-check-label" for="slash-commands-enabled">Enable Slash Commands</label>
                            </div>
                            <button class="btn btn-primary" onclick="saveGeneralSettings()">
                                <i class="bi bi-save"></i> Save Settings
                            </button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <i class="bi bi-shield-lock"></i> Security
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">Dashboard Access</label>
                                <select class="form-select multiple-select" multiple id="dashboard-roles">
                                    <!-- Roles will be populated here -->
                                </select>
                                <small class="text-muted">Select which roles can access this dashboard</small>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Admin Users</label>
                                <select class="form-select multiple-select" multiple id="admin-users">
                                    <!-- Users will be populated here -->
                                </select>
                                <small class="text-muted">These users will have full access regardless of roles</small>
                            </div>
                            <button class="btn btn-primary" onclick="saveSecuritySettings()">
                                <i class="bi bi-save"></i> Save Security Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal fade" id="giveawayModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Giveaway Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="giveaway-modal-body">
                    <!-- Giveaway details will be populated here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" id="end-giveaway-btn">End Giveaway</button>
                    <button type="button" class="btn btn-warning text-dark" id="reroll-giveaway-btn">Reroll Giveaway</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Simulated data storage (in a real app, this would be API calls)
        let botData = {
            guilds: [],
            currentGuild: null,
            commandPermissions: {},
            warningConfig: {
                maxWarnings: 3,
                action: 'kick'
            },
            giveawayConfig: {
                winnerRole: '',
                defaultDuration: '24h'
            },
            generalSettings: {
                prefix: '$',
                embedColor: '#5865F2',
                slashCommands: true
            },
            securitySettings: {
                dashboardRoles: [],
                adminUsers: []
            },
            stats: {
                guildCount: 0,
                userCount: 0,
                commandCount: 8,
                commandsExecuted: 0,
                totalWarnings: 0,
                repeatOffenders: 0,
                totalGiveaways: 0,
                activeGiveaways: 0
            },
            activityLog: []
        };

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading data
            setTimeout(loadDashboardData, 1000);
            
            // Initialize multiple select
            initializeSelects();
            
            // Set up event listeners
            document.getElementById('guild-select').addEventListener('change', function() {
                const guildId = this.value;
                if (guildId) {
                    loadGuildData(guildId);
                }
            });
            
            // Set up giveaway modal buttons
            document.getElementById('end-giveaway-btn').addEventListener('click', endGiveaway);
            document.getElementById('reroll-giveaway-btn').addEventListener('click', rerollGiveaway);
        });

        function initializeSelects() {
            // In a real app, you would use a proper select library like Select2
            const selects = document.querySelectorAll('.multiple-select');
            selects.forEach(select => {
                select.addEventListener('change', function() {
                    // Handle multiple select changes
                });
            });
        }

        function loadDashboardData() {
            // Simulate API call to get bot data
            setTimeout(() => {
                // Simulate guild data
                botData.guilds = [
                    { id: '1', name: 'Awesome Server', icon: 'https://cdn.discordapp.com/icons/123/abc.png', canManage: true },
                    { id: '2', name: 'Test Server', icon: 'https://cdn.discordapp.com/icons/456/def.png', canManage: true },
                    { id: '3', name: 'Another Server', icon: null, canManage: false }
                ];
                
                // Simulate stats
                botData.stats = {
                    guildCount: 3,
                    userCount: 245,
                    commandCount: 8,
                    commandsExecuted: 1245,
                    totalWarnings: 56,
                    repeatOffenders: 7,
                    totalGiveaways: 23,
                    activeGiveaways: 3
                };
                
                // Simulate activity log
                botData.activityLog = [
                    { time: '2 minutes ago', action: 'Ban', server: 'Awesome Server', details: 'Banned user#1234 for spam' },
                    { time: '15 minutes ago', action: 'Giveaway', server: 'Test Server', details: 'Started giveaway for Nitro' },
                    { time: '1 hour ago', action: 'Warn', server: 'Another Server', details: 'Warned user#5678 for NSFW' },
                    { time: '3 hours ago', action: 'Kick', server: 'Awesome Server', details: 'Kicked user#9012 for toxicity' }
                ];
                
                // Update UI with loaded data
                updateDashboardUI();
            }, 500);
        }

        function updateDashboardUI() {
            // Update stats
            document.getElementById('guild-count').textContent = botData.stats.guildCount;
            document.getElementById('user-count').textContent = botData.stats.userCount;
            document.getElementById('command-count').textContent = botData.stats.commandCount;
            document.getElementById('commands-executed').textContent = botData.stats.commandsExecuted;
            document.getElementById('total-warnings').textContent = botData.stats.totalWarnings;
            document.getElementById('repeat-offenders').textContent = botData.stats.repeatOffenders;
            document.getElementById('total-giveaways').textContent = botData.stats.totalGiveaways;
            document.getElementById('active-giveaways').textContent = botData.stats.activeGiveaways;
            
            // Update guild selector
            const guildSelect = document.getElementById('guild-select');
            guildSelect.innerHTML = '<option selected disabled>Select a server...</option>';
            botData.guilds.forEach(guild => {
                const option = document.createElement('option');
                option.value = guild.id;
                option.textContent = guild.name;
                option.disabled = !guild.canManage;
                guildSelect.appendChild(option);
            });
            
            // Update activity log
            const activityLog = document.getElementById('activity-log');
            activityLog.innerHTML = '';
            botData.activityLog.forEach(activity => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${activity.time}</td>
                    <td>${activity.action}</td>
                    <td>${activity.server}</td>
                    <td>${activity.details}</td>
                `;
                activityLog.appendChild(row);
            });
            
            // Update system info (simulated)
            document.getElementById('uptime').textContent = '2 days, 5 hours';
            document.getElementById('memory-usage').textContent = '45.2 MB';
            document.getElementById('cpu-load').textContent = '12%';
            document.getElementById('bot-ping').textContent = '32ms';
            document.getElementById('last-restart').textContent = new Date().toLocaleString();
        }

        function loadGuildData(guildId) {
            // Simulate API call to get guild data
            setTimeout(() => {
                const guild = botData.guilds.find(g => g.id === guildId);
                if (!guild) return;
                
                botData.currentGuild = guild;
                
                // Simulate guild roles
                const roles = [
                    { id: 'admin', name: 'Admin', color: '#ff0000' },
                    { id: 'mod', name: 'Moderator', color: '#00ff00' },
                    { id: 'helper', name: 'Helper', color: '#0000ff' },
                    { id: 'member', name: 'Member', color: '#ffffff' }
                ];
                
                // Simulate guild members (for admin users selector)
                const members = [
                    { id: 'owner', name: 'ServerOwner#0001', roles: ['admin'] },
                    { id: 'mod1', name: 'CoolMod#1234', roles: ['mod'] },
                    { id: 'mod2', name: 'AnotherMod#5678', roles: ['mod'] }
                ];
                
                // Simulate command permissions for this guild
                botData.commandPermissions[guildId] = {
                    ban: ['admin', 'mod'],
                    kick: ['admin', 'mod'],
                    warn: ['admin', 'mod', 'helper'],
                    warnings: ['admin', 'mod', 'helper'],
                    giveaway: ['admin', 'mod'],
                    reroll: ['admin', 'mod'],
                    ping: ['admin', 'mod', 'helper', 'member'],
                    help: ['admin', 'mod', 'helper', 'member']
                };
                
                // Simulate warning config for this guild
                botData.warningConfig = {
                    maxWarnings: 3,
                    action: 'kick'
                };
                
                // Simulate giveaway config for this guild
                botData.giveawayConfig = {
                    winnerRole: 'winner',
                    defaultDuration: '24h'
                };
                
                // Simulate security settings for this guild
                botData.securitySettings = {
                    dashboardRoles: ['admin', 'mod'],
                    adminUsers: ['owner']
                };
                
                // Update UI with guild data
                updateGuildUI(guildId, roles, members);
                
                // Show the command config section
                document.getElementById('command-config-section').style.display = 'block';
            }, 500);
        }

        function updateGuildUI(guildId, roles, members) {
            // Update user permissions display
            const userPermissions = document.getElementById('user-permissions');
            userPermissions.innerHTML = `
                <i class="bi bi-check-circle-fill text-success"></i> You have permission to manage this server's settings.
            `;
            
            // Update role selects for command permissions
            updateRoleSelect('ban-roles', roles, botData.commandPermissions[guildId]?.ban || []);
            updateRoleSelect('kick-roles', roles, botData.commandPermissions[guildId]?.kick || []);
            updateRoleSelect('warn-roles', roles, botData.commandPermissions[guildId]?.warn || []);
            updateRoleSelect('warnings-roles', roles, botData.commandPermissions[guildId]?.warnings || []);
            updateRoleSelect('giveaway-roles', roles, botData.commandPermissions[guildId]?.giveaway || []);
            updateRoleSelect('reroll-roles', roles, botData.commandPermissions[guildId]?.reroll || []);
            updateRoleSelect('ping-roles', roles, botData.commandPermissions[guildId]?.ping || []);
            updateRoleSelect('help-roles', roles, botData.commandPermissions[guildId]?.help || []);
            
            // Update warning config
            document.getElementById('max-warnings').value = botData.warningConfig.maxWarnings;
            document.getElementById('warning-action').value = botData.warningConfig.action;
            
            // Update giveaway config
            updateRoleSelect('winner-role', roles, botData.giveawayConfig.winnerRole || '');
            document.getElementById('default-duration').value = botData.giveawayConfig.defaultDuration;
            
            // Update security settings
            updateRoleSelect('dashboard-roles', roles, botData.securitySettings.dashboardRoles || []);
            updateMemberSelect('admin-users', members, botData.securitySettings.adminUsers || []);
            
            // Update general settings
            document.getElementById('command-prefix').value = botData.generalSettings.prefix;
            document.getElementById('embed-color').value = botData.generalSettings.embedColor;
            document.getElementById('slash-commands-enabled').checked = botData.generalSettings.slashCommands;
            
            // Load mod logs
            loadModLogs(guildId);
            
            // Load giveaways
            loadGiveaways(guildId);
        }

        function updateRoleSelect(selectId, roles, selectedRoles) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            
            if (select.multiple) {
                // Multiple select
                roles.forEach(role => {
                    const option = document.createElement('option');
                    option.value = role.id;
                    option.textContent = role.name;
                    option.selected = selectedRoles.includes(role.id);
                    select.appendChild(option);
                });
            } else {
                // Single select
                select.innerHTML = '<option value="">No role</option>';
                roles.forEach(role => {
                    const option = document.createElement('option');
                    option.value = role.id;
                    option.textContent = role.name;
                    option.selected = role.id === selectedRoles;
                    select.appendChild(option);
                });
            }
        }

        function updateMemberSelect(selectId, members, selectedMembers) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            
            members.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                option.selected = selectedMembers.includes(member.id);
                select.appendChild(option);
            });
        }

        function loadModLogs(guildId) {
            // Simulate API call to get mod logs
            setTimeout(() => {
                const modLogs = [
                    { user: 'Troublemaker#1234', action: 'Ban', moderator: 'Admin#0001', reason: 'Spamming', date: '10 minutes ago' },
                    { user: 'NewUser#5678', action: 'Warn', moderator: 'Moderator#1234', reason: 'NSFW content', date: '1 hour ago' },
                    { user: 'OldMember#9012', action: 'Kick', moderator: 'Admin#0001', reason: 'Toxicity', date: '3 hours ago' },
                    { user: 'AnotherUser#3456', action: 'Warn', moderator: 'Helper#5678', reason: 'Offensive language', date: '5 hours ago' }
                ];
                
                const modLogsTable = document.getElementById('mod-logs');
                modLogsTable.innerHTML = '';
                
                modLogs.forEach(log => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${log.user}</td>
                        <td><span class="badge bg-${getActionColor(log.action)}">${log.action}</span></td>
                        <td>${log.moderator}</td>
                        <td>${log.reason}</td>
                        <td>${log.date}</td>
                    `;
                    modLogsTable.appendChild(row);
                });
            }, 300);
        }

        function getActionColor(action) {
            switch (action.toLowerCase()) {
                case 'ban': return 'danger';
                case 'kick': return 'warning';
                case 'warn': return 'info';
                default: return 'secondary';
            }
        }

        function loadGiveaways(guildId) {
            // Simulate API call to get giveaways
            setTimeout(() => {
                const giveaways = [
                    { id: '1', prize: 'Nitro Classic', channel: 'giveaways', endsIn: '2 hours', entries: 24, winners: 1 },
                    { id: '2', prize: 'Discord Partner', channel: 'general', endsIn: '1 day', entries: 56, winners: 2 },
                    { id: '3', prize: 'Custom Role', channel: 'giveaways', endsIn: '30 minutes', entries: 12, winners: 1 }
                ];
                
                const giveawayList = document.getElementById('giveaway-list');
                giveawayList.innerHTML = '';
                
                giveaways.forEach(giveaway => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${giveaway.prize}</td>
                        <td>#${giveaway.channel}</td>
                        <td>${giveaway.endsIn}</td>
                        <td>${giveaway.entries}</td>
                        <td>${giveaway.winners}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="viewGiveaway('${giveaway.id}')">
                                <i class="bi bi-eye"></i> View
                            </button>
                        </td>
                    `;
                    giveawayList.appendChild(row);
                });
            }, 300);
        }

        function refreshModLogs() {
            if (botData.currentGuild) {
                loadModLogs(botData.currentGuild.id);
                showToast('Mod logs refreshed!', 'success');
            }
        }

        function refreshGiveaways() {
            if (botData.currentGuild) {
                loadGiveaways(botData.currentGuild.id);
                showToast('Giveaways refreshed!', 'success');
            }
        }

        function viewGiveaway(giveawayId) {
            // Simulate API call to get giveaway details
            setTimeout(() => {
                const giveaway = {
                    id: giveawayId,
                    prize: 'Nitro Classic',
                    channel: 'giveaways',
                    endTime: new Date(Date.now() + 7200000).toLocaleString(), // 2 hours from now
                    entries: 24,
                    winners: 1,
                    hostedBy: 'Admin#0001',
                    participants: [
                        'User1#1234',
                        'User2#5678',
                        'User3#9012',
                        'User4#3456'
                    ]
                };
                
                const modalBody = document.getElementById('giveaway-modal-body');
                modalBody.innerHTML = `
                    <h4>${giveaway.prize}</h4>
                    <p><strong>Channel:</strong> #${giveaway.channel}</p>
                    <p><strong>Ends at:</strong> ${giveaway.endTime}</p>
                    <p><strong>Entries:</strong> ${giveaway.entries}</p>
                    <p><strong>Winners:</strong> ${giveaway.winners}</p>
                    <p><strong>Hosted by:</strong> ${giveaway.hostedBy}</p>
                    
                    <h5 class="mt-4">Participants</h5>
                    <div class="participants-list" style="max-height: 200px; overflow-y: auto;">
                        ${giveaway.participants.map(p => `<div>${p}</div>`).join('')}
                    </div>
                `;
                
                // Set the giveaway ID on the buttons
                document.getElementById('end-giveaway-btn').dataset.giveawayId = giveawayId;
                document.getElementById('reroll-giveaway-btn').dataset.giveawayId = giveawayId;
                
                // Show the modal
                const modal = new bootstrap.Modal(document.getElementById('giveawayModal'));
                modal.show();
            }, 300);
        }

        function endGiveaway() {
            const giveawayId = this.dataset.giveawayId;
            Swal.fire({
                title: 'End Giveaway?',
                text: 'Are you sure you want to end this giveaway early?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, end it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Simulate API call to end giveaway
                    setTimeout(() => {
                        showToast('Giveaway ended successfully!', 'success');
                        const modal = bootstrap.Modal.getInstance(document.getElementById('giveawayModal'));
                        modal.hide();
                        refreshGiveaways();
                    }, 500);
                }
            });
        }

        function rerollGiveaway() {
            const giveawayId = this.dataset.giveawayId;
            Swal.fire({
                title: 'Reroll Giveaway?',
                text: 'Are you sure you want to reroll this giveaway?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes, reroll it!'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Simulate API call to reroll giveaway
                    setTimeout(() => {
                        showToast('Giveaway rerolled successfully!', 'success');
                        const modal = bootstrap.Modal.getInstance(document.getElementById('giveawayModal'));
                        modal.hide();
                        refreshGiveaways();
                    }, 500);
                }
            });
        }

        function saveCommandPermissions(category) {
            if (!botData.currentGuild) return;
            
            const guildId = botData.currentGuild.id;
            
            // Get all command permissions for this category
            let commands = [];
            if (category === 'moderation') {
                commands = [
                    { id: 'ban', selectId: 'ban-roles' },
                    { id: 'kick', selectId: 'kick-roles' },
                    { id: 'warn', selectId: 'warn-roles' },
                    { id: 'warnings', selectId: 'warnings-roles' }
                ];
            } else if (category === 'giveaway') {
                commands = [
                    { id: 'giveaway', selectId: 'giveaway-roles' },
                    { id: 'reroll', selectId: 'reroll-roles' }
                ];
            } else if (category === 'utility') {
                commands = [
                    { id: 'ping', selectId: 'ping-roles' },
                    { id: 'help', selectId: 'help-roles' }
                ];
            }
            
            // Update the permissions in our data store
            commands.forEach(cmd => {
                const select = document.getElementById(cmd.selectId);
                const selectedRoles = Array.from(select.selectedOptions).map(opt => opt.value);
                botData.commandPermissions[guildId][cmd.id] = selectedRoles;
            });
            
            // In a real app, you would send this to your backend API
            console.log(`Updated ${category} command permissions:`, botData.commandPermissions[guildId]);
            
            showToast(`${category} command permissions saved!`, 'success');
        }

        function saveWarningConfig() {
            if (!botData.currentGuild) return;
            
            const maxWarnings = parseInt(document.getElementById('max-warnings').value);
            const action = document.getElementById('warning-action').value;
            
            botData.warningConfig = {
                maxWarnings,
                action
            };
            
            // In a real app, you would send this to your backend API
            console.log('Updated warning config:', botData.warningConfig);
            
            showToast('Warning settings saved!', 'success');
        }

        function saveGiveawayConfig() {
            if (!botData.currentGuild) return;
            
            const winnerRole = document.getElementById('winner-role').value;
            const defaultDuration = document.getElementById('default-duration').value;
            
            botData.giveawayConfig = {
                winnerRole,
                defaultDuration
            };
            
            // In a real app, you would send this to your backend API
            console.log('Updated giveaway config:', botData.giveawayConfig);
            
            showToast('Giveaway settings saved!', 'success');
        }

        function saveGeneralSettings() {
            const prefix = document.getElementById('command-prefix').value;
            const embedColor = document.getElementById('embed-color').value;
            const slashCommands = document.getElementById('slash-commands-enabled').checked;
            
            botData.generalSettings = {
                prefix,
                embedColor,
                slashCommands
            };
            
            // In a real app, you would send this to your backend API
            console.log('Updated general settings:', botData.generalSettings);
            
            showToast('General settings saved!', 'success');
        }

        function saveSecuritySettings() {
            if (!botData.currentGuild) return;
            
            const dashboardRolesSelect = document.getElementById('dashboard-roles');
            const dashboardRoles = Array.from(dashboardRolesSelect.selectedOptions).map(opt => opt.value);
            
            const adminUsersSelect = document.getElementById('admin-users');
            const adminUsers = Array.from(adminUsersSelect.selectedOptions).map(opt => opt.value);
            
            botData.securitySettings = {
                dashboardRoles,
                adminUsers
            };
            
            // In a real app, you would send this to your backend API
            console.log('Updated security settings:', botData.securitySettings);
            
            showToast('Security settings saved!', 'success');
        }

        function showToast(message, type = 'success') {
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                }
            });
            
            Toast.fire({
                icon: type,
                title: message
            });
        }
    </script>
</body>
</html>